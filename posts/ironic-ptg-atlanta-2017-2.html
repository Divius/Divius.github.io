<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Atlanta PTG Summary: Ironic (part 2) | Coding Music</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://dtantsur.github.io/posts/ironic-ptg-atlanta-2017-2.html">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="Dmitry Tantsur">
<meta property="og:site_name" content="Coding Music">
<meta property="og:title" content="Atlanta PTG Summary: Ironic (part 2)">
<meta property="og:url" content="http://dtantsur.github.io/posts/ironic-ptg-atlanta-2017-2.html">
<meta property="og:description" content="This is an extract from my personal notes and public etherpads from the
OpenStack PTG 2017 in Atlanta. A lot of text ahead!
The first part is here.


CI and testing
Etherpad: https://etherpad.openstac">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-03-01T15:30:00+01:00">
<meta property="article:tag" content="openstack">
<meta property="article:tag" content="software">
</head>
<body>
    <section class="social"><ul>
<li><a href="../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://twitter.com/creepy_owlet" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://instagram.com/creepy_owlet" title="My Instagram"><i class="icon-instagram"></i></a></li>
            <li><a href="https://github.com/dtantsur" title="My Github"><i class="icon-github"></i></a></li>
                <li><hr></li>
                <li><a href="../talks/mitaka-inspector-status" title="Ironic Inspector Mitaka Status"><small>Ironic Inspector Mitaka Status</small></a></li>
                <li><a href="../talks/whatsnew-ironic-mitaka" title="What's New in Ironic Mitaka"><small>What's New in Ironic Mitaka</small></a></li>
                <li><a href="../talks/fosdem2016" title="FOSDEM16: Ironic Debugging"><small>FOSDEM16: Ironic Debugging</small></a></li>
                <li><a href="../talks/devconf2015" title="DevConf15: Ironic Overview"><small>DevConf15: Ironic Overview</small></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
            
    <div class="post">
    
    <h1 class="p-name entry-title" itemprop="headline name">Atlanta PTG Summary: Ironic (part 2)</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2017-03-01T15:30:00+01:00">2017-03-01 15:30</time>
</div>
            
        <div itemprop="keywords" class="tags">
        <ul>
        Tags : 
           <li><a class="tag p-category" href="../categories/openstack.html" rel="tag">openstack</a></li>
           <li><a class="tag p-category" href="../categories/software.html" rel="tag">software</a></li>
        </ul>
</div>

        </div>
        <div class="body">
            <div>
<p>This is an extract from my personal notes and public etherpads from the
OpenStack PTG 2017 in Atlanta. A lot of text ahead!</p>
<p>The first part is <a class="reference external" href="ironic-ptg-atlanta-2017-1.html">here</a>.</p>
<!-- TEASER_END: Read more -->
<div class="section" id="ci-and-testing">
<h2>CI and testing</h2>
<p>Etherpad: <a class="reference external" href="https://etherpad.openstack.org/p/ironic-pike-ptg-ci-testing">https://etherpad.openstack.org/p/ironic-pike-ptg-ci-testing</a></p>
<div class="section" id="missing-ci-coverage">
<h3>Missing CI coverage</h3>
<dl class="docutils">
<dt>UEFI</dt>
<dd>Cirros finally released a stable version with UEFI support built in.
A non-voting job is running with partition images, should be made voting
soon. A test with whole disk images will be introduced as part of
<a class="reference external" href="https://review.openstack.org/#/c/423556/">standalone tests</a>.</dd>
<dt>Local bootloader</dt>
<dd>
<p class="first">Requires small enough instance images with Grub2 present (Cirros does not
have it). We agreed to create a new repository with scripts to build
suitable images. Potentially can be shared with other teams (e.g. Neutron).</p>
<p class="last">Actions: <strong>lucasagomes</strong> and/or <strong>vsaienko</strong> to look into it.</p>
</dd>
<dt>Adopt state</dt>
<dd>Tests have been up for some time, but have ordering issues with nova-based
tests. Suggesting <strong>TheJulia</strong> to move them to <a class="reference external" href="https://review.openstack.org/#/c/423556/">standalone tests</a>.</dd>
<dt>Root device hints</dt>
<dd>
<p class="first">Not covered by any CI. Will need modifying how we create virtual machines.
First step is to get size-based hints work. Check two cases: with size
strictly equal and greater than requested.</p>
<p class="last">Actions: <strong>dtantsur</strong> to look into it.</p>
</dd>
<dt>Capabilities-based scheduling</dt>
<dd>
<p class="first">This may actually go to Nova gate, not ours. Still, it relies on some code
in our driver, so we'd better cover it to ensure that the placement API
changes don't break it.</p>
<p class="last">Actions: <strong>vsaienko</strong> to look into it.</p>
</dd>
<dt>Port groups</dt>
<dd>The same image problem as with local boot - the same action item to create
a repository with build scripts to build our images.</dd>
<dt>VLAN-aware instances</dt>
<dd>The same image problem + requires <a class="reference external" href="https://review.openstack.org/#/c/392959/">reworking our network simulation code</a>.</dd>
<dt>Conductor take over and hash ring</dt>
<dd>
<p class="first">Requires a separate multi-node job.</p>
<p class="last">Action: <strong>vsaienko</strong> to investigate.</p>
</dd>
</dl>
<div class="section" id="dib-based-ipa-image">
<h4>DIB-based IPA image</h4>
<p>Currently the <tt class="docutils literal"><span class="pre">ironic-agent</span></tt> element to build such image is in the DIB
repository outside of our control. If we want to properly support it, we need
to gate on its changes, and to gate IPA changes on its job. Some time ago we
had a tentative agreement to move the element to our tree.</p>
<p>It was blocked by the fact that DIB rarely or never removes elements, and does
not have a way to properly de-duplicate elements with the same name.</p>
<p>An obvious solution we are going to propose is to take this element in IPA
tree under a different name (<tt class="docutils literal"><span class="pre">ironic-python-agent</span></tt>?). The old element will
get deprecated and only critical fixes will be accepted for it.</p>
<dl class="docutils">
<dt>Action</dt>
<dd>
<strong>dtantsur</strong> to (re)start this discussion with the TripleO and DIB teams.</dd>
</dl>
</div>
<div class="section" id="api-microversions-testing">
<h4>API microversions testing</h4>
<p>We are not sure we have tests covering all microversions. We seem to have API
tests using <tt class="docutils literal">fake</tt> driver that cover at least some of them. We should start
paying more attention to this part of our testing.</p>
<dl class="docutils">
<dt>Actions</dt>
<dd>
<strong>dtantsur</strong> to check if these tests are up-to-date and split them to a
separate CI job.
<strong>pas-ha</strong> to write API tests for internal API (i.e. lookup/heartbeat).</dd>
</dl>
</div>
</div>
<div class="section" id="global-openstack-goals">
<h3>Global OpenStack goals</h3>
<div class="section" id="splitting-away-tempest-plugins">
<h4>Splitting away tempest plugins</h4>
<p>It did not end up a goal for Pike, and there are still some concerns in the
community. Still, as we already apply ugly hacks in our jobs to use the
tempest plugin from master, we agreed to proceed with the split.</p>
<p>To simplify both maintenance and consuming our tests, we agreed to merge
ironic and ironic-inspector plugins. The introspection tests will or will
not run based on ironic-inspector presence.</p>
<p>We propose having a merged core team (i.e. ironic-inspector-core which
already includes ironic-core) for this repository. We trust people who
only have core rights on ironic-inspector to not approve things they're
not authorized to approve.</p>
</div>
<div class="section" id="python-3-support">
<h4>Python 3 support</h4>
<p>We've been running Python 3 unit tests for quite some time. Additionally,
ironic-inspector runs a non-voting Python 3 functional test. Ironic has an
experimental job which fails, apparently, because of swift. We can start with
switching this job to the <tt class="docutils literal">pxe_ipmitool</tt> driver (not requiring swift).
Inspector does not have a Python 3 integration tests job proposed yet.</p>
<dl class="docutils">
<dt>Actions</dt>
<dd>
<p class="first"><strong>JayF</strong> and <strong>hurricanerix</strong> will drive this work in both ironic and
ironic-inspector.</p>
<p><strong>lucasagomes</strong> to check pyghmi and virtualbmc compatibility.</p>
<p class="last"><strong>krtaylor</strong> and/or <strong>mjturek</strong> to check MoltenIron.</p>
</dd>
</dl>
<p>We agreed that Bifrost is out of scope for this task. Its Python 3
compatibility mostly depends on one of Ansible anyway. Similarly, for the UI
we need horizon to be fully Python 3 compatible first.</p>
<dl class="docutils">
<dt>Important decisions</dt>
<dd>We recommend vendors to make their libraries compatible with Python 3.
It may become a strict requirement in one of the coming releases.</dd>
</dl>
</div>
<div class="section" id="api-behind-wsgi-container">
<h4>API behind WSGI container</h4>
<p>This seems quite straightforward. The work has started to switch ironic CI to
WSGI already. For ironic-inspector it's going to be done as part of the HA
work.</p>
</div>
</div>
</div>
</div>
        </div>
        
        <ul class="pager hidden-print">
<li class="previous">
                <a href="ironic-ptg-atlanta-2017-1.html" rel="prev" title="Atlanta PTG Summary: Ironic (part 1)">Previous post</a>
            </li>
        </ul>
<div style="text-align:center;font-size:large">
<!-- Social buttons -->
<a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fdtantsur.github.io&amp;t=" target="_blank" title="Share on Facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' +
  encodeURIComponent(document.URL) + '&amp;t=' + encodeURIComponent(document.URL));
  return false;"><i class="icon-facebook"></i></a>
<a href="https://twitter.com/intent/tweet?source=http%3A%2F%2Fdtantsur.github.io&amp;text=:%20http%3A%2F%2Fdtantsur.github.io&amp;via=creepy_owlet" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' +
  encodeURIComponent(document.title) + ':%20' +
  encodeURIComponent(document.URL)); return false;">
  <i class="icon-twitter"></i></a>
<a href="https://plus.google.com/share?url=http%3A%2F%2Fdtantsur.github.io" target="_blank" title="Share on Google+" onclick="window.open('https://plus.google.com/share?url=' +
  encodeURIComponent(document.URL)); return false;">
  <i class="icon-google-plus"></i></a>
<a href="http://www.tumblr.com/share?v=3&amp;u=http%3A%2F%2Fdtantsur.github.io&amp;t=&amp;s=" target="_blank" title="Post to Tumblr" onclick="window.open('http://www.tumblr.com/share?v=3&amp;u=' +
  encodeURIComponent(document.URL) + '&amp;t=' +
  encodeURIComponent(document.title)); return false;">
  <i class="icon-tumblr"></i></a>

<!-- End of social buttons -->
            </div>
            
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="diviusnet2",
            disqus_url="http://dtantsur.github.io/posts/ironic-ptg-atlanta-2017-2.html",
        disqus_title="Atlanta PTG Summary: Ironic (part 2)",
        disqus_identifier="cache/posts/ironic-ptg-atlanta-2017-2.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        

    </div>

        
       <script>var disqus_shortname="diviusnet2";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><footer id="footer"><p>Contents © 2017 Dmitry Tantsur <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
<img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"></a> - Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a> using <a href="https://themes.getnikola.com/#zen" rel="nofollow">Zen</a> theme.</p>
            
        </footer>
</div>
    </section><script src="../assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
